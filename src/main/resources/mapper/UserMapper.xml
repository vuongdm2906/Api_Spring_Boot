<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.UserMapper">
    <select id="getUserById" resultType="com.example.demo.dto.request.userRequest">
        SELECT * FROM tn_user WHERE id = #{id};
    </select>

    <select id="getAllUsers" resultType="com.example.demo.dto.request.userRequest">
        SELECT * FROM tn_user
                          LIMIT #{getPaging.pageSize} OFFSET #{getPaging.offset};
    </select>


    <select id="addUser" resultType="com.example.demo.dto.request.userRequest">
        INSERT INTO public.tn_user
            ( id, email, username, "password", created_at, updated_at)
        VALUES( #{id},#{email}, #{username}, #{password} ,now(), now());
    </select>

    <select id="updateUser" resultType="com.example.demo.dto.request.userRequest">
        UPDATE public.tn_user
        SET email=#{email}, username= #{username}, "password"= #{password} , created_at=now(), updated_at=now()
        WHERE id= #{id};
    </select>

    <select id="deleteUser" resultType="com.example.demo.dto.request.userRequest">
        DELETE FROM public.tn_user
        WHERE id=#{id};
    </select>

    <select id="selectEmployees" parameterType="map" resultType="com.example.demo.dto.request.userRequest">
        SELECT *
        FROM employees
        ORDER BY employee_id
            LIMIT #{pageSize} OFFSET #{offset};
    </select>

    <select id="countUsers" resultType="long">
        SELECT COUNT(*) FROM tn_user;
    </select>
</mapper>
